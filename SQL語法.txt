/*第一步 先執行這段，建立DATABASE */
IF NOT EXISTS (SELECT * FROM  sysdatabases where name='CoinShell')
CREATE DATABASE CoinShell


/*第二步 執行下面這段，建立Table*/


USE CoinShell
CREATE TABLE Members(
Id INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
CustomizedUserName NVARCHAR(50) NOT NULL,
CustomizedUserAvatar NVARCHAR(max) NOT NULL,
E_Mail NVARCHAR(50) NOT NULL UNIQUE,
Password NVARCHAR(50) NOT NULL,
MyShell MONEY ,
IsPremium NVARCHAR(2) NOT NULL,
JoINTime Date NOT NULL,

Recommender  NVARCHAR(50)  /*這個地方應該要參照Members的欄位，不能讓使用者填一個不存在的E_mail*/
)



/*CREATE TABLE Recommender(
Id INT UNIQUE NOT NULL ,
)*/

Use CoinShell
CREATE TABLE Cryptocurrency(
id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
informationDate DateTime NOT NULL,
Name_of_Cryptocurrency NVARCHAR(30),
Symbol_of_Cryptocurrency NVARCHAR(30),
Slug_of_Cryptocurrency NVARCHAR(30),
Total_Supply DECIMAL(38,4),
Max_Supply DECIMAL(38,4),
Circulating_Supply DECIMAL(38,4),
Percent_Change_1h DECIMAL(12,4),
Percent_Change_24h DECIMAL(12,4),
Percent_Change_7d DECIMAL(12,4),
Percent_Change_30d DECIMAL(12,4),
Percent_Change_60d DECIMAL(12,4),
Percent_Change_90d DECIMAL(12,4),
ytdPriceChangePercentageTwd DECIMAL(12,4),
ytdPriceChangePercentageUsd DECIMAL(12,4),
TWD_Price_of_Cryptocurrency MONEY,
TWD_Market_Cap MONEY ,
TWD_Fully_Diluted_Market_Cap MONEY ,
USD_Price_of_Cryptocurrency MONEY,
USD_Market_Cap MONEY ,
USD_Fully_Diluted_Market_Cap MONEY ,
volume24hUsd DECIMAL(38,4),
volume24hTwd DECIMAL(38,4),
)


Use CoinShell

CREATE TABLE Sets_of_Investmen(
Id INT REFERENCES Members(Id),
Order_of_Sets INT NOT NULL unique ,
Element_of_Set1 NVARCHAR(50),
Element_of_Set2 NVARCHAR(50),
Element_of_Set3 NVARCHAR(50),
Element_of_Set4 NVARCHAR(50),
Element_of_Set5 NVARCHAR(50),
Element_of_Set6 NVARCHAR(50),
Element_of_Set7 NVARCHAR(50),
Element_of_Set8 NVARCHAR(50),
Element_of_Set9 NVARCHAR(50),
Element_of_Set10 NVARCHAR(50),
Element_of_Set11 NVARCHAR(50),
Element_of_Set12 NVARCHAR(50),
Element_of_Set13 NVARCHAR(50),
Element_of_Set14 NVARCHAR(50),
Element_of_Set15 NVARCHAR(50),
Element_of_Set16 NVARCHAR(50),
Element_of_Set17 NVARCHAR(50),
Element_of_Set18 NVARCHAR(50),
Element_of_Set19 NVARCHAR(50),
Element_of_Set20 NVARCHAR(50),

)


USE CoinShell
Create TABLE Personal_Forum_Information (
Id INT REFERENCES Members(Id),
Total_Posted_Artical INT /*應該要和Article_Of_Members做結合，依照帳號抓出上傳的文章數量*/,
)

USE CoinShell
CREATE TABLE Article_Of_Members(
Id INT IDENTITY(1,1) NOT NULL,
Title NVARCHAR(100) NOT NULL,
E_Mail_Of_Uploader NVARCHAR(50) NOT NULL ,
Content_Of_Article NVARCHAR(max),
Isvisible INT ,
Upload_Date DATE)


USE CoinShell
CREATE TABLE News(
Id INT IDENTITY(1,1) NOT NULL,
Upload_Time Date NOT NULL,
Title NVARCHAR(100),
Content_Of_News NVARCHAR(MAX),
Image_Of_News NVARCHAR(MAX)
)

USE CoinShell
CREATE TABLE Forum(
Id INT IDENTITY(1,1) NOT NULL,
Members_Id INT REFERENCES Members(Id),
Date TIMESTAMP,
Title  NVARCHAR(30),
Content_Of_Article NVARCHAR(MAX),
Flair NVARCHAR(30)
);


USE CoinShell
CREATE TABLE Chat(
Id INT IDENTITY(1,1) NOT NULL,
Members_Id INT REFERENCES Members(Id),
Date TIMESTAMP,
Messege NVARCHAR(100),
)



